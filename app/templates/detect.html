<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deteksi Risiko Kesehatan Mental | MentalCare AI</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <style>
      /* --- Halaman Deteksi Styling Khusus --- */
      body {
        max-width: 900px;
        margin: 0 auto;
        padding: 20px;
      }
      .step {
        display: none;
      }
      .step.active {
        display: block;
      }
      /* --- Pastikan CSS untuk Navigasi dipindahkan ke style.css agar konsisten --- */
      /* --- Jika tidak ada style.css, gaya dasar ini dipertahankan di sini --- */
      .navigation-buttons {
        display: flex;
        justify-content: center; /* Dipusatkan */
        gap: 20px;
        margin-top: 40px;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }
      .navigation-buttons button {
        width: 45%;
        padding: 14px 25px;
        border-radius: 50px;
      }
      #prevBtn {
        background-color: #6c757d;
      }
      #prevBtn:hover {
        background-color: #5a6268;
      }
      #result {
        display: none;
      }
    </style>
  </head>
  <body>
    <header class="navbar-minimal">
      <div class="logo">MentalCare AI</div>
      <button class="menu-toggle" aria-label="Toggle navigation menu">
        <i class="fas fa-bars"></i>
      </button>
    </header>

    <main class="question-container">
      <div class="instruction-box">
        <i class="fas fa-info-circle"></i> Instruksi
        <p>
          Nilai setiap gejala berdasarkan pengalaman Anda selama dua minggu
          terakhir.
        </p>
      </div>

      <div class="progress-info-wrapper">
        <span class="progress-pill">
          Pertanyaan <span id="currentStep">1</span> dari 14
        </span>
        <div class="progress-bar-container">
          <div
            id="progressBarFill"
            class="progress-bar-fill"
            style="width: 0%"
          ></div>
        </div>
      </div>

      <form id="detectionForm">
        <div id="steps-container">
          <div class="step active" data-step="1">
            <h2>Depressed Mood</h2>
            <p class="question-desc">Merasa sedih, tertekan, atau putus asa?</p>
            <div class="question-group">
              <div class="options">
                <input
                  type="radio"
                  id="phq1_0"
                  name="phq1"
                  value="0"
                  required
                /><label for="phq1_0">Tidak Pernah</label>
                <input type="radio" id="phq1_3" name="phq1" value="3" /><label
                  for="phq1_3"
                  >Selalu</label
                >
                <input type="radio" id="phq1_1" name="phq1" value="1" /><label
                  for="phq1_1"
                  >Jarang</label
                >
                <input type="radio" id="phq1_2" name="phq1" value="2" /><label
                  for="phq1_2"
                  >Sering</label
                >
              </div>
            </div>
          </div>

          <div class="step" data-step="2">
            <h2>Interest</h2>
            <p class="question-desc">
              Kurang minat atau senang melakukan sesuatu?
            </p>
            <div class="question-group">
              <div class="options">
                <input
                  type="radio"
                  id="phq2_0"
                  name="phq2"
                  value="0"
                  required
                /><label for="phq2_0">Tidak Pernah</label>
                <input type="radio" id="phq2_3" name="phq2" value="3" /><label
                  for="phq2_3"
                  >Selalu</label
                >
                <input type="radio" id="phq2_1" name="phq2" value="1" /><label
                  for="phq2_1"
                  >Jarang</label
                >
                <input type="radio" id="phq2_2" name="phq2" value="2" /><label
                  for="phq2_2"
                  >Sering</label
                >
              </div>
            </div>
          </div>

          <div class="step" data-step="3">
            <h2>Sleep Disturbance</h2>
            <p class="question-desc">Sulit tidur atau terlalu banyak tidur?</p>
            <div class="question-group">
              <div class="options">
                <input
                  type="radio"
                  id="phq3_0"
                  name="phq3"
                  value="0"
                  required
                /><label for="phq3_0">Tidak Pernah</label>
                <input type="radio" id="phq3_3" name="phq3" value="3" /><label
                  for="phq3_3"
                  >Selalu</label
                >
                <input type="radio" id="phq3_1" name="phq3" value="1" /><label
                  for="phq3_1"
                  >Jarang</label
                >
                <input type="radio" id="phq3_2" name="phq3" value="2" /><label
                  for="phq3_2"
                  >Sering</label
                >
              </div>
            </div>
          </div>

          <div class="step" data-step="4">
            <h2>Fatigue</h2>
            <p class="question-desc">Merasa lelah atau kurang energi?</p>
            <div class="question-group">
              <div class="options">
                <input
                  type="radio"
                  id="phq4_0"
                  name="phq4"
                  value="0"
                  required
                /><label for="phq4_0">Tidak Pernah</label>
                <input type="radio" id="phq4_3" name="phq4" value="3" /><label
                  for="phq4_3"
                  >Selalu</label
                >
                <input type="radio" id="phq4_1" name="phq4" value="1" /><label
                  for="phq4_1"
                  >Jarang</label
                >
                <input type="radio" id="phq4_2" name="phq4" value="2" /><label
                  for="phq4_2"
                  >Sering</label
                >
              </div>
            </div>
          </div>

          <div class="step" data-step="5">
            <h2>Appetite</h2>
            <p class="question-desc">
              Nafsu makan buruk atau terlalu banyak makan?
            </p>
            <div class="question-group">
              <div class="options">
                <input
                  type="radio"
                  id="phq5_0"
                  name="phq5"
                  value="0"
                  required
                /><label for="phq5_0">Tidak Pernah</label>
                <input type="radio" id="phq5_3" name="phq5" value="3" /><label
                  for="phq5_3"
                  >Selalu</label
                >
                <input type="radio" id="phq5_1" name="phq5" value="1" /><label
                  for="phq5_1"
                  >Jarang</label
                >
                <input type="radio" id="phq5_2" name="phq5" value="2" /><label
                  for="phq5_2"
                  >Sering</label
                >
              </div>
            </div>
          </div>

          <div class="step" data-step="6">
            <h2>Worthlessness</h2>
            <p class="question-desc">
              Merasa tidak berharga atau bersalah berlebihan?
            </p>
            <div class="question-group">
              <div class="options">
                <input
                  type="radio"
                  id="phq6_0"
                  name="phq6"
                  value="0"
                  required
                /><label for="phq6_0">Tidak Pernah</label>
                <input type="radio" id="phq6_3" name="phq6" value="3" /><label
                  for="phq6_3"
                  >Selalu</label
                >
                <input type="radio" id="phq6_1" name="phq6" value="1" /><label
                  for="phq6_1"
                  >Jarang</label
                >
                <input type="radio" id="phq6_2" name="phq6" value="2" /><label
                  for="phq6_2"
                  >Sering</label
                >
              </div>
            </div>
          </div>

          <div class="step" data-step="7">
            <h2>Concentration</h2>
            <p class="question-desc">
              Sulit berkonsentrasi atau membuat keputusan?
            </p>
            <div class="question-group">
              <div class="options">
                <input
                  type="radio"
                  id="phq7_0"
                  name="phq7"
                  value="0"
                  required
                /><label for="phq7_0">Tidak Pernah</label>
                <input type="radio" id="phq7_3" name="phq7" value="3" /><label
                  for="phq7_3"
                  >Selalu</label
                >
                <input type="radio" id="phq7_1" name="phq7" value="1" /><label
                  for="phq7_1"
                  >Jarang</label
                >
                <input type="radio" id="phq7_2" name="phq7" value="2" /><label
                  for="phq7_2"
                  >Sering</label
                >
              </div>
            </div>
          </div>

          <div class="step" data-step="8">
            <h2>Agitation</h2>
            <p class="question-desc">
              Gerakan atau bicara sangat lambat, atau sebaliknya gelisah?
            </p>
            <div class="question-group">
              <div class="options">
                <input
                  type="radio"
                  id="phq8_0"
                  name="phq8"
                  value="0"
                  required
                /><label for="phq8_0">Tidak Pernah</label>
                <input type="radio" id="phq8_3" name="phq8" value="3" /><label
                  for="phq8_3"
                  >Selalu</label
                >
                <input type="radio" id="phq8_1" name="phq8" value="1" /><label
                  for="phq8_1"
                  >Jarang</label
                >
                <input type="radio" id="phq8_2" name="phq8" value="2" /><label
                  for="phq8_2"
                  >Sering</label
                >
              </div>
            </div>
          </div>

          <div class="step" data-step="9">
            <h2>Suicidal Ideation</h2>
            <p class="question-desc">
              Pikiran bahwa lebih baik mati atau melukai diri sendiri?
            </p>
            <div class="question-group">
              <div class="options">
                <input
                  type="radio"
                  id="phq9_0"
                  name="phq9"
                  value="0"
                  required
                /><label for="phq9_0">Tidak Pernah</label>
                <input type="radio" id="phq9_3" name="phq9" value="3" /><label
                  for="phq9_3"
                  >Selalu</label
                >
                <input type="radio" id="phq9_1" name="phq9" value="1" /><label
                  for="phq9_1"
                  >Jarang</label
                >
                <input type="radio" id="phq9_2" name="phq9" value="2" /><label
                  for="phq9_2"
                  >Sering</label
                >
              </div>
            </div>
          </div>

          <div class="step" data-step="10">
            <h2>Personal Data</h2>

            <div class="question-group">
              <h3 class="question-title">10. Berapa usia Anda saat ini?</h3>

              <input
                type="number"
                name="Age"
                class="input-age"
                placeholder="Masukkan Usia (18â€“99)"
                min="18"
                max="99"
                required
              />
            </div>
          </div>

          <div class="step" data-step="11">
            <h2>Personal Data</h2>
            <div class="question-group">
              <h3>11. Apa jenis kelamin Anda?</h3>
              <div class="options options-2-wide">
                <input
                  type="radio"
                  id="g_male"
                  name="Gender"
                  value="Male"
                  required
                /><label for="g_male">Laki-laki</label>
                <input
                  type="radio"
                  id="g_female"
                  name="Gender"
                  value="Female"
                /><label for="g_female">Perempuan / Lainnya</label>
              </div>
            </div>
          </div>

          <div class="step" data-step="12">
            <h2>Risk Factors</h2>
            <div class="question-group">
              <h3>
                12. Apakah ada riwayat masalah kesehatan mental dalam keluarga
                Anda?
              </h3>
              <div class="options options-2-wide">
                <input
                  type="radio"
                  id="fh_yes"
                  name="family_history"
                  value="Yes"
                  required
                /><label for="fh_yes">Ya</label>
                <input
                  type="radio"
                  id="fh_no"
                  name="family_history"
                  value="No"
                /><label for="fh_no">Tidak</label>
              </div>
            </div>
          </div>

          <div class="step" data-step="13">
            <h2>Intervention History</h2>
            <div class="question-group">
              <h3>
                13. Apakah Anda pernah atau sedang menjalani perawatan/terapi
                kesehatan mental?
              </h3>
              <div class="options options-2-wide">
                <input
                  type="radio"
                  id="t_yes"
                  name="treatment"
                  value="Yes"
                  required
                /><label for="t_yes">Ya</label>
                <input
                  type="radio"
                  id="t_no"
                  name="treatment"
                  value="No"
                /><label for="t_no">Tidak</label>
              </div>
            </div>
          </div>

          <div class="step" data-step="14">
            <h2>Interference Level</h2>
            <div class="question-group">
              <h3>
                14. Seberapa sering masalah ini mengganggu
                pekerjaan/studi/aktivitas sosial Anda?
              </h3>
              <div class="options">
                <input
                  type="radio"
                  id="wi_never"
                  name="work_interfere"
                  value="Never"
                  required
                /><label for="wi_never">Tidak pernah</label>
                <input
                  type="radio"
                  id="wi_rarely"
                  name="work_interfere"
                  value="Rarely"
                /><label for="wi_rarely">Jarang</label>
                <input
                  type="radio"
                  id="wi_sometimes"
                  name="work_interfere"
                  value="Sometimes"
                /><label for="wi_sometimes">Kadang-kadang</label>
                <input
                  type="radio"
                  id="wi_often"
                  name="work_interfere"
                  value="Often"
                /><label for="wi_often">Sering</label>
              </div>
            </div>
          </div>
        </div>

        <div class="navigation-buttons">
          <button type="button" id="prevBtn" style="display: none">
            â† Sebelumnya
          </button>
          <button type="button" id="nextBtn">Selanjutnya â†’</button>
          <button type="submit" id="submitBtn" style="display: none">
            Analisis Hasil
          </button>
        </div>

        <div class="progress-bar-text">
          <span id="answeredCount">0</span> dari 14 pertanyaan telah dijawab
        </div>
      </form>

      <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p>Menganalisis respons Anda...</p>
      </div>

      <div id="result">
        <h2>ğŸ“Š Hasil Penilaian Skrining</h2>

        <div class="model-container">
          <div class="model-card" id="svm_card">
            <div class="model-badge">Model SVM</div>
            <div class="model-diagnosis" id="svm_diagnosis_label">â€”</div>
            <div class="confidence-info">
              Kepercayaan: <span id="svm_confidence">Medium (â€”%)</span>
            </div>

            <h4 class="prob-title">Distribusi Probabilitas</h4>
            <ul class="probability-list" id="svm_probs_list">
              <li>
                Mild
                <div class="prob-bar-wrapper">
                  <div class="prob-bar mild-bar" style="width: 0%"></div>
                  <span>â€”%</span>
                </div>
              </li>
              <li>
                Moderate
                <div class="prob-bar-wrapper">
                  <div class="prob-bar moderate-bar" style="width: 0%"></div>
                  <span>â€”%</span>
                </div>
              </li>
              <li>
                Severe
                <div class="prob-bar-wrapper">
                  <div class="prob-bar severe-bar" style="width: 0%"></div>
                  <span>â€”%</span>
                </div>
              </li>
              <li>
                No Depression
                <div class="prob-bar-wrapper">
                  <div class="prob-bar minimal-bar" style="width: 0%"></div>
                  <span>â€”%</span>
                </div>
              </li>
            </ul>
          </div>

          <div class="model-card" id="nb_card">
            <div class="model-badge">Model Naive Bayes</div>
            <div class="model-diagnosis" id="nb_diagnosis_label">â€”</div>
            <div class="confidence-info">
              Kepercayaan: <span id="nb_confidence">Medium (â€”%)</span>
            </div>

            <h4 class="prob-title">Distribusi Probabilitas</h4>
            <ul class="probability-list" id="nb_probs_list">
              <li>
                Mild
                <div class="prob-bar-wrapper">
                  <div class="prob-bar mild-bar" style="width: 0%"></div>
                  <span>â€”%</span>
                </div>
              </li>
              <li>
                Moderate
                <div class="prob-bar-wrapper">
                  <div class="prob-bar moderate-bar" style="width: 0%"></div>
                  <span>â€”%</span>
                </div>
              </li>
              <li>
                Severe
                <div class="prob-bar-wrapper">
                  <div class="prob-bar severe-bar" style="width: 0%"></div>
                  <span>â€”%</span>
                </div>
              </li>
              <li>
                No Depression
                <div class="prob-bar-wrapper">
                  <div class="prob-bar minimal-bar" style="width: 0%"></div>
                  <span>â€”%</span>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <div class="disclaimer-box">
          <i class="fas fa-exclamation-triangle"></i>
          <p>
            <strong>Penafian Penting:</strong> Penilaian ini hanya untuk tujuan
            skrining dan tidak boleh dianggap sebagai diagnosis klinis. Jika
            Anda mengalami gejala depresi, silakan berkonsultasi dengan
            profesional kesehatan yang berkualitas untuk evaluasi dan perawatan
            yang tepat.
          </p>
        </div>

        <div class="result-actions">
          <button class="btn-primary" onclick="window.location.reload()">
            Penilaian Baru
          </button>

          <a href="/" class="btn-secondary"> Kembali ke Beranda </a>
        </div>
      </div>
    </main>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <script>
      document
        .getElementById("detectionForm")
        .addEventListener("submit", () => {
          document.getElementById("loadingOverlay").style.display = "flex";
        });
    </script>

    <script src="/app/static/translate.js"></script>
  </body>
</html>
